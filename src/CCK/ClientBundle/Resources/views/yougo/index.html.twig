{% extends "CCKClientBundle::layout.html.twig" %}

{% block stylesheets %}
	{{ parent() }}
	<style>
.site-header{
    z-index: 30;
    background: #F8F7F2;
    position: fixed;
	width: 1800px;
    justify-content: space-between;
}
.content{
    line-height: 1.6;
    margin: 0 auto;
    padding-top: 380px;
}
.panel-search {
	width: 1200px;
}
.panel-search field_title {
    height: 20px;
}
.table-yougo {
	overflow-x: scroll;
    overflow-y: hidden;
	width: 1800px;
}
thead, tbody {
  display: block;
}
tbody {
  overflow-x: hidden;
  overflow-y: scroll;
  height: 400px;
}
.sort-button {
    width: auto;
    padding:0;
    margin:0;
    background:none;
    border:0;
    overflow:visible;
    cursor:pointer;
    font-size:8px;
}

	</style>
{% endblock %}

{% block contents %}
<header class="site-header">

<!-- yougo search area -->
<form action="{{ path('client.yougo.index') }}" class="form-horizontal" method="GET" autocomplete="off">
<div class="row">
	<div class="col-lg-12">
		<div class="panel panel-primary panel-search">
			<div class="panel-heading">{{ 'text.search.conditions'|trans }}</div>
			<div class="panel-body">
				<div class="row">
					<div class="form-horizontal">
						<div class="form-group">
							<div class="col-lg-12">
								<label class="col-sm-2">{{ 'text.yougo.curriculum'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control js-cur input-sm" name="curriculum">
										<option value="0">--------------</option>
										{% for cur in cur_list %}
											<option value="{{ cur.id }}" {{ cur.id == curriculum ? " selected " : '' }}">{{ cur.name }}</option>
										{% endfor %}
									</select>
								</div>
								<label class="col-sm-2">{{ 'text.yougo.version'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control js-han input-sm" name="version" disabled>
										<option value="0">--------------</option>
										{% for ver in ver_list %}
											<option value="{{ ver.id }}" {{ ver.id == version ? " selected " : '' }}">{{ ver.name }}</option>
										{% endfor %}
									</select>
								</div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-12">
								<label class="col-sm-2">{{ 'text.yougo.head.hen'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control js-hen input-sm" name="hen">
										<option value="0">--------------</option>
										{% for hen in hen_list %}
											<option value="{{ hen.hen }}" {{ hen.hen == search_hen ? " selected " : '' }}">{{ hen.name }}</option>
										{% endfor %}
									</select>
								</div>
								<label class="col-sm-2">{{ 'text.yougo.head.sho'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control js-sho input-sm" name="sho" disabled>
										<option value="0">--------------</option>
										{% for sho in sho_list %}
											<option value="{{ sho.sho }}" {{ sho.sho == search_sho ? " selected " : '' }}">{{ sho.name }}</option>
										{% endfor %}
									</select>
								</div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-12">
								<label class="col-sm-2">{{ 'text.yougo.head.dai'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control js-dai input-sm" name="dai" disabled>
										<option value="0">--------------</option>
										{% for dai in dai_list %}
											<option value="{{ dai.dai }}" {{ dai.dai == search_dai ? " selected " : '' }}">{{ dai.name }}</option>
										{% endfor %}
									</select>
								</div>
								<label class="col-sm-2">{{ 'text.yougo.head.chu'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control js-chu input-sm" name="chu" disabled>
										<option value="0">--------------</option>
										{% for chu in chu_list %}
											<option value="{{ chu.chu }}" {{ chu.chu == search_chu ? " selected " : '' }}">{{ chu.name }}</option>
										{% endfor %}
									</select>
								</div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-12">
								<label class="col-sm-2">{{ 'text.yougo.head.ko'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control js-ko input-sm" name="ko" disabled>
										<option value="0">--------------</option>
										{% for ko in ko_list %}
											<option value="{{ ko.ko }}" {{ ko.ko == search_ko ? " selected " : '' }}">{{ ko.name }}</option>
										{% endfor %}
									</select>
								</div>
								<label class="col-sm-2">{{ 'text.yougo.nombre'|trans }}</label>
								<div class="col-sm-4">
									<input type="text" class="form-control input-sm" name="nombre" value="{{ nombre }}">
								</div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-12">
								<label class="col-sm-2">{{ 'text.yougo.freq.text'|trans }}</label>
								<div class="col-sm-2">
									<select class="form-control input-sm" name="text_freq">
										<option value="0">--------------</option>
										<option value="1" {{ text_freq == '1' ? " selected " : '' }}">A</option>
										<option value="2" {{ text_freq == '2' ? " selected " : '' }}">B</option>
										<option value="3" {{ text_freq == '3' ? " selected " : '' }}">C</option>
									</select>
								</div>
								<label class="col-sm-2">{{ 'text.yougo.freq.center'|trans }}</label>
								<div class="col-sm-2">
									<input type="text" class="form-control input-sm" name="center_freq" value="{{ center_freq }}">
								</div>
								<label class="col-sm-1">{{ 'text.yougo.news.exam'|trans }}</label>
								<div class="col-sm-1">
									<input type="checkbox" name="news_exam[]">
								</div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-12">
								<label class="col-sm-2">{{ 'text.yougo.term'|trans }}</label>
								<div class="col-sm-4">
									<input type="text" class="form-control input-sm" name="term" value="{{ term }}">
								</div>
								<div class="col-sm-2">
									<button class="btn btn-primary button_text_align input-sm" type="submit">{{ 'btn.search'|trans }}</button>
								</div>
								<div class="col-sm-2">
									<button class="btn btn-default button_text_align input-sm" type="button" OnClick="search_clear();">{{ 'btn.clear'|trans }}</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</form>

<hr>

</header>

<!-- yougo list area -->
<div class="content">
<div class="row">
	<div class="col-lg-10 text-center">
		{{ knp_pagination_render(pagination) }}
	</div>
	<div class="col-lg-2 text-right">
	<form action="{{ path('client.yougo.index') }}" class="form-horizontal" method="GET">
		<select class="form-control js-list-count" name="list_count">
			<option value="20" {{ list_count == '20' ? " selected " : '' }}">20件表示</option>
			<option value="50" {{ list_count == '50' ? " selected " : '' }}">50件表示</option>
			<option value="100" {{ list_count == '100' ? " selected " : '' }}">100件表示</option>
			<option value="200" {{ list_count == '200' ? " selected " : '' }}">200件表示</option>
			<option value="5" {{ list_count == '5' ? " selected " : '' }}">5件表示</option>
		</select>
	</form>
	</div>
</div>

<div class="row">
	<div class="col-lg-12">
		<table class="table table-yougo table-striped">
			<thead>
				<tr class="text-center">
					<th width="60px" class="text-left">{{ 'text.yougo.term_id'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.term_id"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.term_id"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="100px" class="text-left">{{ 'text.yougo.term'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.main_term"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.main_term"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="120px" class="text-left">{{ 'text.yougo.kana'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.kana"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.kana"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="120px" class="text-left">{{ 'text.yougo.index_kana'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_kana"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_kana"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="100px" class="text-left">{{ 'text.yougo.sub_term'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="SubTerm.sub_term"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="SubTerm.sub_term"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="120px" class="text-left">{{ 'text.yougo.sub_kana'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="SubTerm.kana"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="SubTerm.kana"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="120px" class="text-left">{{ 'text.yougo.sub_index_kana'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="SubTerm.index_kana"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="SubTerm.index_kana"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="100px" class="text-left">{{ 'text.yougo.refer_term'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="Refer_term.refer_term"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="Refer_term.refer_term"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="100px" class="text-left">{{ 'text.yougo.index_original'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_original"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_original"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="120px" class="text-left">{{ 'text.yougo.index_original_kana'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_original_kana"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_original_kana"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="60px" class="text-left">{{ 'text.yougo.index_abbreviation'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_abbreviation"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.index_abbreviation"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="60px" class="text-left">{{ 'text.yougo.handover'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.handover"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.handover"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="80px" class="text-left">{{ 'text.yougo.update_user'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="User.name"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="User.name"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="100px" class="text-left">{{ 'text.yougo.modify_date'|trans }}<form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.modify_date"><button type="submit" class="sort-button" name="sort_up">▲</button></form><form action="{{ path('client.yougo.index') }}" method="POST"><input type="hidden" name="field" value="MainTerm.modify_date"><button type="submit" class="sort-button" name="sort_down">▼</button></form></th>
					<th width="60px" class="text-left"></th>
					<th width="60px" class="text-left"></th>
					<th width="60px" class="text-left"></th>
					<th width="60px" class="text-left"></th>
				</tr>
			</thead>
			<tbody>
				{% for yougo in pagination %}
				<tr class="text-center">
					<td width="60px" class="text-left">{{ yougo.term_id }}</td>
					<td width="100px" class="text-left">{{ yougo.main_term }}</td>
					<td width="120px" class="text-left">{{ yougo.kana }}</td>
					<td width="120px" class="text-left">{{ yougo.index_kana }}</td>
					<td width="100px" class="text-left">{{ yougo.sub_term }}</td>
					<td width="120px" class="text-left">{{ yougo.sub_kana }}</td>
					<td width="120px" class="text-left">{{ yougo.sub_index_kana }}</td>
					<td width="100px" class="text-left">{{ yougo.refer_term }}</td>
					<td width="100px" class="text-left">{{ yougo.index_original }}</td>
					<td width="120px" class="text-left">{{ yougo.index_original_kana }}</td>
					<td width="60px" class="text-left">{{ yougo.index_abbreviation }}</td>
					<td width="60px" class="text-left">{{ yougo.handover|length > 5 ? yougo.handover[:5]~'…' : yougo.handover }}</td>
					<td width="80px" class="text-left">{{ yougo.name }}</td>
					<td width="100px" class="text-left">{{ yougo.modify_date|date('Y/m/d H:i') }}</td>

					<td width="60px">
						<div class="form-inline">
							<div class="form-group">
								<a href="{#{ path('client.yougo.edit', {'id': yougo.id}) }#}"><button class="btn btn-primary btn-sm button_yougo_list" name="id" value="{{ yougo.id }}" >{{ 'btn.edit'|trans }}</button></a>
							</div>
						</div>
					</td>
					<td width="60px">
						<div class="form-inline">
							<div class="form-group">
								<a href="{#{ path('client.yougo.preview', {'id': yougo.id}) }#}"><button class="btn btn-primary btn-sm button_yougo_list" name="id" value="{{ yougo.id }}" >{{ 'btn.preview'|trans }}</button></a>
							</div>
						</div>
					</td>
					<td width="60px">
						<div class="form-inline">
							<div class="form-group">
								<a href="{#{ path('client.yougo.delete', {'id': yougo.id}) }#}"><button class="btn btn-primary btn-sm button_yougo_list" name="id" value="{{ yougo.id }}" >{{ 'btn.delete'|trans }}</button></a>
							</div>
						</div>
					</td>
					<td width="60px">
						<div class="form-inline">
							<div class="form-group">
								<a href="{#{ path('client.yougo.csv', {'id': yougo.id}) }#}"><button class="btn btn-primary btn-sm button_yougo_list" name="id" value="{{ yougo.id }}" >{{ 'btn.csv'|trans }}</button></a>
							</div>
						</div>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>

<div class="row">
	<div class="col-lg-12 text-right">
		{{ cur_page }}
	</div>
</div>

<div class="row">
	<div class="col-lg-12 text-center">
		{{ knp_pagination_render(pagination) }}
	</div>
</div>

</div>

{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script>

		function search_clear(){
			$('[name="curriculum"]').val('0');
			$('[name="version"]').val('0');
			$('[name="hen"]').val('0');
			$('[name="sho"]').val('0');
			$('[name="dai"]').val('0');
			$('[name="chu"]').val('0');
			$('[name="ko"]').val('0');
			$('input[name="nombre"]').val('');
			$('[name="text_freq"]').val('0');
			$('input[name="center_freq"]').val('');
			$('input[name="news_exam[]"]').prop("checked",false);
			$('input[name="term"]').val('');

			$('.js-han').attr("disabled", true);
			$('.js-sho').attr("disabled", true);
			$('.js-dai').attr("disabled", true);
			$('.js-chu').attr("disabled", true);
			$('.js-ko').attr("disabled", true);
		}

		$(function(){
			$('.js-cur').bind('change', function(){
				var selected_ver = $(this).val();
				if(selected_ver == '0'){
					$('[name="version"]').val('0');
					$('.js-han').attr("disabled", true);
				}else{
					$('.js-han').attr("disabled", false);
				}
			});

			$('.js-han').bind('change', function(){
				var selected_ver = $(this).val();
				var data = {
						'version': selected_ver
				};
				$.ajax({
					url: "{{ path('client.yougo.hen.ajax') }}",
					data: data,
					method: 'POST',
					success: function(response){
						var options = generateOptions(response);
						injectOption('js-hen', options);
					},
					error: function(response){
					}
				});
			});

			$('.js-hen').bind('change', function(){
				var selected_ver = $('[name="version"]').val();
				var selected_hen = $(this).val();

				if(selected_hen == '0'){
					$('[name="sho"]').val('0');
					$('.js-sho').attr("disabled", true);
				}else{
					$('.js-sho').attr("disabled", false);
				}
				$('[name="dai"]').val('0');
				$('[name="chu"]').val('0');
				$('[name="ko"]').val('0');
				$('.js-dai').attr("disabled", true);
				$('.js-chu').attr("disabled", true);
				$('.js-ko').attr("disabled", true);

				var data = {
						'version': selected_ver,
						'hen': selected_hen
				};
				$.ajax({
					url: "{{ path('client.yougo.sho.ajax') }}",
					data: data,
					method: 'POST',
					success: function(response){
						var options = generateOptions(response);
						injectOption('js-sho', options);
					},
					error: function(response){
					}
				});
			});

			$('.js-sho').bind('change', function(){
				var selected_ver = $('[name="version"]').val();
				var selected_hen = $('[name="hen"]').val();
				var selected_sho = $(this).val();

				if(selected_sho == '0'){
					$('[name="dai"]').val('0');
					$('.js-dai').attr("disabled", true);
				}else{
					$('.js-dai').attr("disabled", false);
				}
				$('[name="chu"]').val('0');
				$('[name="ko"]').val('0');
				$('.js-chu').attr("disabled", true);
				$('.js-ko').attr("disabled", true);

				var data = {
						'version': selected_ver,
						'hen': selected_hen,
						'sho': selected_sho
				};
				$.ajax({
					url: "{{ path('client.yougo.dai.ajax') }}",
					data: data,
					method: 'POST',
					success: function(response){
						var options = generateOptions(response);
						injectOption('js-dai', options);
					},
					error: function(response){
					}
				});
			});

			$('.js-dai').bind('change', function(){
				var selected_ver = $('[name="version"]').val();
				var selected_hen = $('[name="hen"]').val();
				var selected_sho = $('[name="sho"]').val();
				var selected_dai = $(this).val();

				if(selected_dai == '0'){
					$('[name="chu"]').val('0');
					$('.js-chu').attr("disabled", true);
				}else{
					$('.js-chu').attr("disabled", false);
				}
				$('[name="ko"]').val('0');
				$('.js-ko').attr("disabled", true);

				var data = {
						'version': selected_ver,
						'hen': selected_hen,
						'sho': selected_sho,
						'dai': selected_dai
				};
				$.ajax({
					url: "{{ path('client.yougo.chu.ajax') }}",
					data: data,
					method: 'POST',
					success: function(response){
						var options = generateOptions(response);
						injectOption('js-chu', options);
					},
					error: function(response){
					}
				});
			});

			$('.js-chu').bind('change', function(){
				var selected_ver = $('[name="version"]').val();
				var selected_hen = $('[name="hen"]').val();
				var selected_sho = $('[name="sho"]').val();
				var selected_dai = $('[name="dai"]').val();
				var selected_chu = $(this).val();

				if(selected_chu == '0'){
					$('[name="ko"]').val('0');
					$('.js-ko').attr("disabled", true);
				}else{
					$('.js-ko').attr("disabled", false);
				}

				var data = {
						'version': selected_ver,
						'hen': selected_hen,
						'sho': selected_sho,
						'dai': selected_dai,
						'chu': selected_chu
				};
				$.ajax({
					url: "{{ path('client.yougo.ko.ajax') }}",
					data: data,
					method: 'POST',
					success: function(response){
						var options = generateOptions(response);
						injectOption('js-ko', options);
					},
					error: function(response){
					}
				});
			});

			$('.js-list-count').bind('change', function(){
				var form = $(this).closest('form');
				form.submit();
			});
		});

	</script>
{% endblock %}
